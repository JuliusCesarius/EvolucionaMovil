@model EvolucionaMovil.Models.AbonoVM
@using EvolucionaMovil.Models.Enums; 
@{
    ViewBag.Title = "Detalle de Depósito";
}

<script src="@Url.Content("~/Scripts/Abono.js")" type="text/javascript"></script>

<fieldset>
    <legend>Depósito</legend>

    <div class="display-label">PayCenter</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.PayCenter)
    </div>

     <div class="display-label">Tipo de cuenta</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.TipoCuenta)
    </div>

    <div class="display-label">Banco</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Banco )
    </div>

    <div class="display-label">Cuenta Bancaria</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.CuentaBancaria )
    </div>

    <div class="display-label">Monto</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.MontoString)
    </div>

    <div class="display-label">FechaPago</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.FechaPago)
    </div>
   
    <div class="display-label">Referencia</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Referencia)
    </div>

    <div class="display-label">Estatus</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.StatusString )
    </div>

    <div class="display-label">FechaCreacion</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.FechaCreacion)
    </div>

    <div class="" id="HistorialEstatus">
    <span >Hitórico de Estatus</span>
    @if (Model.HistorialEstatusVM!= null)
    {
        foreach (var item in Model.HistorialEstatusVM)
        { 
           <div>
              <span> @item.Fecha</span>   
              <span> @item.Estatus </span> 
              <span> @item.Comentarios </span> 
            </div> 
        }
    }
    </div>
 @using (Html.BeginForm())
 {
     <input type="hidden" name ="AbonoId" value="@Model.AbonoId"/>
     
    <div>
        @if (ViewBag.Role == EnumRoles.PayCenter.GetHashCode())
        {
            <input type="button" id="Cancelar"  onclick="MuestraComentario()" name="action"  class="freshbutton-blue" value="Cancelar" />
             <div id="ComentarioPayCenter" style="display: none;">
                  <span class="">Cancelar</span>
                  <div  class="display-label">@Html.LabelFor(model => model.CambioEstatusVM.Comentario)</div>
                  <div class="display-field">
                    @Html.EditorFor(model => model.CambioEstatusVM.Comentario)
                   </div>
                  <div>
                         <input type="submit" name="CambioEstatusVM.Estatus"  class="freshbutton-blue" value="Cancelar" />
                         <input type="button" onclick="OcultaComentario()" id="NoCancelar" name=""  class="freshbutton-blue" value="No Cancelar" />
                  </div>         
            </div>
        }
        else if (ViewBag.Role == EnumRoles.Staff.GetHashCode() || ViewBag.Role == EnumRoles.Administrator.GetHashCode())
        {
          <div>
            <input type="submit" id = "Aplicar" name="CambioEstatusVM.Estatus" class="freshbutton-blue" value="Aplicar" /> 
            <input type="button" id = "Rechazar" onclick="MuestraComentario()" class="freshbutton-blue" value="Rechazar" /> 
            </div>
            <div id="ComentarioStaff"  style="display: none;"> 
               <span class="">Rechazar</span>
               <div class="display-label">Comentario</div>
               <div class="display-field">
                    @Html.EditorFor(model => model.CambioEstatusVM.Comentario)
               </div>
               <div>
                         <input type="submit" name="CambioEstatusVM.Estatus"  class="freshbutton-blue" value="Rechazar" />
                         <input type="button" name="" onclick="OcultaComentario()" class="freshbutton-blue" value="Cancelar" />
               </div>
                 
           </div>  
        }  
  </div>
  <div><p >@ViewBag.mensage</p></div> 
 }
</fieldset>

<p>
    @*@Html.ActionLink("Edit", "Edit", new { id=Model.AbonoId }) |*@
    @Html.ActionLink("Back to List", "Index")
</p>