@using EvolucionaMovil.Models.Enums
@model EvolucionaMovil.Models.PagoVM
@{
    ViewBag.Title = "Create";
}
<h1>
    Registrar pago</h1>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/PagoServicios-Create.js")" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Pago</legend>
        @{var hiddenString = "style=display:none";}

        <div class="resumen fr saldos" @(Model.PayCenterId > 0 ? string.Empty : hiddenString)>
            <h3>
                Saldo Actual <span id="saldoActual">@ViewData["SaldoActual"]</span></h3>
            <h3>
                Eventos <span id="eventoActual">@ViewData["Eventos"]</span></h3>
            <a href="/Paquetes/Buy">[comprar eventos]</a>
        </div>
        @if (HttpContext.Current.User.IsInRole(enumRoles.Staff.ToString()) || HttpContext.Current.User.IsInRole(enumRoles.Administrator.ToString()))
        {
            <div class="editor-label"><label for="PayCenterName">PayCenters</label></div>        
                <div class="editor-field">
                @Html.EditorFor(model => model.PayCenterName)
                <input type="hidden" id="hddPayCenterId" name="PayCenterId" value="@Model.PayCenterId" />
                @Html.ValidationMessageFor(model => model.PayCenterName)
                </div>
        }
            
        <div class="editor-label">
            @Html.LabelFor(model => model.ServicioId)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.ServicioId, new SelectList(Model.Servicios, "Value", "Text"))
            @Html.ValidationMessageFor(model => model.ServicioId)
        </div>
        <div id="camposAdicionales">
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.ClienteNombre)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ClienteNombre)
            @Html.ValidationMessageFor(model => model.ClienteNombre)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Importe)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Importe)
            @Html.ValidationMessageFor(model => model.Importe)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.FechaVencimiento)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FechaVencimiento)
            @Html.ValidationMessageFor(model => model.FechaVencimiento)
        </div>
        <p>
            <input type="submit" class="freshbutton-blue" value="Create" />
        </p>
        <div class="resumen fr saldos"@(Model.PayCenterId > 0 ? string.Empty : hiddenString)>
            <h3>
                Saldo Final <span id="saldoFinal">@ViewData["SaldoFinal"]</span></h3>
            <h3>
                Eventos <span id="eventoFinal">@ViewData["EventosFinal"]</span>
            </h3>
        </div>
    </fieldset>
}
<div>
    <p>@ViewBag.Mensaje</p>
</div>
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
